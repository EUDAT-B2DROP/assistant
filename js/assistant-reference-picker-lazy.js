"use strict";(self.webpackChunkassistant=self.webpackChunkassistant||[]).push([["reference-picker-lazy"],{80057:(t,e,s)=>{s.d(e,{A:()=>r});var n=s(71354),a=s.n(n),o=s(76314),i=s.n(o)()(a());i.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const r="imageGenerationReference"==s.j?i:null},56963:(t,e,s)=>{s.d(e,{A:()=>r});var n=s(71354),a=s.n(n),o=s(76314),i=s.n(o)()(a());i.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const r="imageGenerationReference"!=s.j?i:null},41154:(e,s,n)=>{n.d(s,{default:()=>_});var a=n(52112),o=n(63814),i=n(70715);const r={name:"ImageResultCustomPickerElement",components:{},props:{providerId:{type:String,required:!0},accessible:{type:Boolean,default:!1},taskType:{type:String,required:!0},outputKey:{type:String,required:!0},multipleImages:{type:Boolean,default:!1}},data:()=>({}),computed:{},watch:{},mounted(){OCA.Assistant.openAssistantForm({appId:"assistant",taskType:this.taskType,closeOnResult:!1,actionButtons:[{label:t("assistant","Submit"),title:t("assistant","Submit the current task's result"),type:"primary",iconSvg:a,onClick:t=>{this.submit(t)}}]}).catch((t=>{console.debug("[assistant picker] assistant was closed",t),this.$emit("cancel")}))},beforeDestroy(){},methods:{submit(t){const e=this.multipleImages?t.output[this.outputKey]:[t.output[this.outputKey]];Promise.all(e.map((e=>this.shareFile(e,t.id)))).then((t=>{if(t.some((t=>"ERR_CANCELED"===t.code)))return void console.debug("At least one request has been canceled, do nothing");const e=t.map((t=>{const e=t.data.ocs.data.shareToken;return window.location.protocol+"//"+window.location.host+(0,o.generateUrl)("/s/{token}",{token:e})}));this.$emit("submit",e.join("\n"))}))},shareFile(t,e){const s=(0,o.generateOcsUrl)("/apps/assistant/api/v1/task/{taskId}/file/{fileId}/share",{taskId:e,fileId:t});return i.default.post(s)}}};var l=n(85072),c=n.n(l),u=n(97825),p=n.n(u),d=n(77659),m=n.n(d),h=n(55056),f=n.n(h),y=n(10540),g=n.n(y),k=n(41113),v=n.n(k),b=n(80057),A={};A.styleTagTransform=v(),A.setAttributes=f(),A.insert=m().bind(null,"head"),A.domAPI=p(),A.insertStyleElement=g();c()(b.A,A);b.A&&b.A.locals&&b.A.locals;const _=(0,n(14486).A)(r,(function(){return(0,this._self._c)("div",{staticClass:"assistant-picker-content-wrapper"})}),[],!1,null,"4e2d125a",null).exports},70113:(e,s,n)=>{n.d(s,{default:()=>b});var a=n(52112);const o={name:"TextResultCustomPickerElement",components:{},props:{providerId:{type:String,required:!0},accessible:{type:Boolean,default:!1},taskType:{type:String,required:!0},outputKey:{type:String,required:!0}},data:()=>({}),computed:{},watch:{},mounted(){OCA.Assistant.openAssistantForm({appId:"assistant",taskType:this.taskType,closeOnResult:!1,actionButtons:[{label:t("assistant","Submit"),title:t("assistant","Submit the current task's result"),type:"primary",iconSvg:a,onClick:t=>{this.$emit("submit",t.output[this.outputKey]??"")}}]}).catch((t=>{console.debug("[assistant picker] assistant was closed",t),this.$emit("cancel")}))},beforeDestroy(){},methods:{}};var i=n(85072),r=n.n(i),l=n(97825),c=n.n(l),u=n(77659),p=n.n(u),d=n(55056),m=n.n(d),h=n(10540),f=n.n(h),y=n(41113),g=n.n(y),k=n(56963),v={};v.styleTagTransform=g(),v.setAttributes=m(),v.insert=p().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=f();r()(k.A,v);k.A&&k.A.locals&&k.A.locals;const b=(0,n(14486).A)(o,(function(){return(0,this._self._c)("div",{staticClass:"assistant-picker-content-wrapper"})}),[],!1,null,"804b7f76",null).exports},14486:(t,e,s)=>{function n(t,e,s,n,a,o,i,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=l):a&&(l=r?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:t,options:c}}s.d(e,{A:()=>n})},52112:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-check" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg>'}}]);
//# sourceMappingURL=assistant-reference-picker-lazy.js.map?v=3281fb8c76893d92c415