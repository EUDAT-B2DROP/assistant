"use strict";(self.webpackChunkassistant=self.webpackChunkassistant||[]).push([["speech-to-text-picker-lazy"],{7248:(t,e,o)=>{o.d(e,{A:()=>s});var n=o(1354),r=o.n(n),a=o(6314),i=o.n(a)()(r());i.push([t.id,".stt-input-form[data-v-e4e7f042]{display:flex;flex-direction:column;align-items:center;justify-content:center}.stt-input-form .form-wrapper[data-v-e4e7f042]{display:flex;flex-direction:column;align-items:center;width:100%;margin:8px 0}.stt-input-form .form-wrapper .radios[data-v-e4e7f042]{display:flex}.stt-input-form .form-wrapper .radios[data-v-e4e7f042] .checkbox-radio-switch__text{flex:unset !important}.stt-input-form .line[data-v-e4e7f042]{display:flex;align-items:center;margin-top:8px;width:100%}.stt-input-form .line.justified[data-v-e4e7f042]{justify-content:center}.stt-input-form .recorder-wrapper[data-v-e4e7f042]{margin:12px 0 12px 0;display:flex;flex-direction:column;align-items:center}.stt-input-form[data-v-e4e7f042] .recorder{margin-top:2px;background-color:var(--color-main-background) !important;box-shadow:unset !important}.stt-input-form[data-v-e4e7f042] .recorder.no-audio .ar-player-actions{display:none}.stt-input-form[data-v-e4e7f042] .recorder .ar-recorder{display:none}.stt-input-form[data-v-e4e7f042] .recorder .ar-content{padding:0}.stt-input-form[data-v-e4e7f042] .recorder .ar-content *{color:var(--color-main-text) !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-icon{background-color:var(--color-main-background) !important;fill:var(--color-main-text) !important;border:1px solid var(--color-border) !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-recorder__duration{margin:16px 0 16px 0}.stt-input-form[data-v-e4e7f042] .recorder .ar-recorder__time-limit{position:unset !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-player-bar{border:1px solid var(--color-border) !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-player .ar-line-control{background-color:var(--color-background-dark) !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-player .ar-line-control__head{background-color:var(--color-main-text) !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-player__time{font-size:14px}.stt-input-form[data-v-e4e7f042] .recorder .ar-player .ar-volume__icon{background-color:var(--color-main-background) !important;fill:var(--color-main-text) !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-records{height:unset !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-records__record{border-bottom:1px solid var(--color-border) !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-records__record--selected{background-color:var(--color-background-dark) !important;border:1px solid var(--color-border) !important}.stt-input-form[data-v-e4e7f042] .recorder .ar-records__record--selected .ar-icon{background-color:var(--color-background-dark) !important}","",{version:3,sources:["webpack://./src/components/SpeechToText/SpeechToTextInputForm.vue"],names:[],mappings:"AACA,iCACC,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CAGA,+CACC,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,UAAA,CACA,YAAA,CACA,uDACC,YAAA,CAEA,oFACC,qBAAA,CAKH,uCACC,YAAA,CACA,kBAAA,CACA,cAAA,CACA,UAAA,CACA,iDACC,sBAAA,CAIF,mDACC,oBAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CAGD,2CAYC,cAAA,CACA,wDAAA,CACA,2BAAA,CAXE,uEACC,YAAA,CAKH,wDACC,YAAA,CAKD,uDACC,SAAA,CAED,yDACC,uCAAA,CAED,oDACC,wDAAA,CACA,sCAAA,CACA,+CAAA,CAED,kEACC,oBAAA,CAED,oEACC,yBAAA,CAGA,0DACC,+CAAA,CAED,uEACC,wDAAA,CACA,6EACC,kDAAA,CAGF,4DACC,cAAA,CAGA,uEACC,wDAAA,CACA,sCAAA,CAIH,uDACC,uBAAA,CACA,+DACC,sDAAA,CAED,yEACC,wDAAA,CACA,+CAAA,CACA,kFACC,wDAAA",sourcesContent:["\n.stt-input-form {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\t//padding: 12px 16px 16px 16px;\n\n\t.form-wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tmargin: 8px 0;\n\t\t.radios {\n\t\t\tdisplay: flex;\n\n\t\t\t:deep(.checkbox-radio-switch__text) {\n\t\t\t\tflex: unset !important;\n\t\t\t}\n\t\t}\n\t}\n\n\t.line {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-top: 8px;\n\t\twidth: 100%;\n\t\t&.justified {\n\t\t\tjustify-content: center;\n\t\t}\n\t}\n\n\t.recorder-wrapper {\n\t\tmargin: 12px 0 12px 0;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\n\t:deep(.recorder) {\n\t\t&.no-audio {\n\t\t\t.ar-player {\n\t\t\t\t&-actions {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.ar-recorder {\n\t\t\tdisplay: none;\n\t\t}\n\t\tmargin-top: 2px;\n\t\tbackground-color: var(--color-main-background) !important;\n\t\tbox-shadow: unset !important;\n\t\t.ar-content {\n\t\t\tpadding: 0;\n\t\t}\n\t\t.ar-content * {\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t\t.ar-icon {\n\t\t\tbackground-color: var(--color-main-background) !important;\n\t\t\tfill: var(--color-main-text) !important;\n\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t}\n\t\t.ar-recorder__duration {\n\t\t\tmargin: 16px 0 16px 0;\n\t\t}\n\t\t.ar-recorder__time-limit {\n\t\t\tposition: unset !important;\n\t\t}\n\t\t.ar-player {\n\t\t\t&-bar {\n\t\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t\t}\n\t\t\t.ar-line-control {\n\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\t&__head {\n\t\t\t\t\tbackground-color: var(--color-main-text) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t\t&__time {\n\t\t\t\tfont-size: 14px;\n\t\t\t}\n\t\t\t.ar-volume {\n\t\t\t\t&__icon {\n\t\t\t\t\tbackground-color: var(--color-main-background) !important;\n\t\t\t\t\tfill: var(--color-main-text) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.ar-records {\n\t\t\theight: unset !important;\n\t\t\t&__record {\n\t\t\t\tborder-bottom: 1px solid var(--color-border) !important;\n\t\t\t}\n\t\t\t&__record--selected {\n\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\tborder: 1px solid var(--color-border) !important;\n\t\t\t\t.ar-icon {\n\t\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=i},8141:(t,e,o)=>{o.d(e,{A:()=>s});var n=o(1354),r=o.n(n),a=o(6314),i=o.n(a)()(r());i.push([t.id,".picker-content-wrapper[data-v-69d3213e]{width:100%}.picker-content[data-v-69d3213e]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px 16px 16px 16px}.picker-content h2[data-v-69d3213e]{display:flex;align-items:center;gap:8px}.picker-content h2 .icon[data-v-69d3213e]{color:var(--color-primary)}.picker-content .footer[data-v-69d3213e]{display:flex;align-items:center;justify-content:end;gap:8px;margin-top:8px;width:100%}","",{version:3,sources:["webpack://./src/views/SpeechToText/SpeechToTextCustomPickerElement.vue"],names:[],mappings:"AACA,yCACC,UAAA,CAGD,iCACC,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,2BAAA,CAEA,oCACC,YAAA,CACA,kBAAA,CACA,OAAA,CAEA,0CACC,0BAAA,CAIF,yCACC,YAAA,CACA,kBAAA,CACA,mBAAA,CACA,OAAA,CACA,cAAA,CACA,UAAA",sourcesContent:["\n.picker-content-wrapper {\n\twidth: 100%;\n}\n\n.picker-content {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 12px 16px 16px 16px;\n\n\th2 {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8px;\n\n\t\t.icon {\n\t\t\tcolor: var(--color-primary);\n\t\t}\n\t}\n\n\t.footer {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: end;\n\t\tgap: 8px;\n\t\tmargin-top: 8px;\n\t\twidth: 100%;\n\t}\n}\n"],sourceRoot:""}]);const s=i},1870:(e,o,n)=>{n.d(o,{default:()=>M});var r=n(9191);const a={name:"AssistantIcon",props:{title:{type:String,default:""},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var i=n(4486);const s=(0,i.A)(a,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon assistant-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{attrs:{fill:t.fillColor,width:t.size,height:t.size,"enable-background":"new 0 0 24 24",version:"1.1",viewBox:"0 0 24 24","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M18,4C16.29,4 15.25,4.33 14.65,4.61C13.88,4.23 13,4 12,4C11,4 10.12,4.23 9.35,4.61C8.75,4.33 7.71,4 6,4C3,4 1,12 1,14C1,14.83 2.32,15.59 4.14,15.9C4.78,18.14 7.8,19.85 11.5,20V15.72C10.91,15.35 10,14.68 10,14C10,13 12,13 12,13C12,13 14,13 14,14C14,14.68 13.09,15.35 12.5,15.72V20C16.2,19.85 19.22,18.14 19.86,15.9C21.68,15.59 23,14.83 23,14C23,12 21,4 18,4M4.15,13.87C3.65,13.75 3.26,13.61 3,13.5C3.25,10.73 5.2,6.4 6.05,6C6.59,6 7,6.06 7.37,6.11C5.27,8.42 4.44,12.04 4.15,13.87M9,12A1,1 0 0,1 8,11C8,10.46 8.45,10 9,10A1,1 0 0,1 10,11C10,11.56 9.55,12 9,12M15,12A1,1 0 0,1 14,11C14,10.46 14.45,10 15,10A1,1 0 0,1 16,11C16,11.56 15.55,12 15,12M19.85,13.87C19.56,12.04 18.73,8.42 16.63,6.11C17,6.06 17.41,6 17.95,6C18.8,6.4 20.75,10.73 21,13.5C20.75,13.61 20.36,13.75 19.85,13.87Z"}})])])}),[],!1,null,null,null).exports;var d=n(9518),c=n(6222),l=n(6296),A=n(3814),u=n(5168),p=n(9527),C=n(890),m=n(7395),f=n(2073),h=n(9898),g=n.n(h);n(5471).default.use(g());const v=(0,u.a1)(t("assistant","Choose Audio File")).setMimeTypeFilter(["audio/mpeg","audio/mp4","audio/ogg","audio/wav","audio/x-wav","audio/webm","audio/opus","audio/flac","audio/vorbis","audio/m4b"]).setMultiSelect(!1).allowDirectories(!1).setType(1).build(),x={name:"SpeechToTextInputForm",components:{NcButton:d.A,NcCheckboxRadioSwitch:f.A,UndoIcon:p.A,MicrophoneIcon:m.A,StopIcon:C.A},props:{loading:{type:Boolean,default:!1},mode:{type:String,default:"record"},audioData:{type:[Blob,null],default:null},audioFilePath:{type:[String,null],default:null}},data:()=>({isRecording:!1,resettingRecorder:!1}),mounted(){const t=this.$refs.startRecordingButton;t?.$el?.focus()},methods:{resetAudioState(){this.$emit("update:audio-data",null),this.$emit("update:audio-file-path",null),this.isRecording=!1},onModeChanged(t){this.isRecording&&this.stopRecording(),this.$emit("update:mode",t)},async onChooseButtonClick(){this.$emit("update:audio-file-path",await v.pick())},resetRecording(){this.$emit("update:audio-data",null),this.resettingRecorder=!0,this.$nextTick((()=>{this.resettingRecorder=!1,this.$nextTick((()=>{const t=this.$refs.startRecordingButton;t?.$el?.focus()}))}))},startRecording(){this.$refs.recorder.$el.querySelector(".ar-recorder .ar-icon").click()},stopRecording(){this.$refs.recorder.$el.querySelector(".ar-recorder .ar-icon").click()},async onRecordStarts(t){this.isRecording=!0,this.$nextTick((()=>{const t=this.$refs.stopRecordingButton;t?.$el?.focus()}))},async onRecordEnds(t){this.isRecording=!1;try{this.$emit("update:audio-data",t.blob)}catch(t){console.error("Recording error:",t),this.$emit("update:audio-data",null)}}}};var b=n(5072),k=n.n(b),y=n(7825),_=n.n(y),w=n(7659),D=n.n(w),B=n(5056),R=n.n(B),S=n(540),F=n.n(S),T=n(1113),E=n.n(T),I=n(7248),$={};$.styleTagTransform=E(),$.setAttributes=R(),$.insert=D().bind(null,"head"),$.domAPI=_(),$.insertStyleElement=F();k()(I.A,$);I.A&&I.A.locals&&I.A.locals;const N={name:"SpeechToTextCustomPickerElement",components:{SpeechToTextInputForm:(0,i.A)(x,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"stt-input-form"},[e("div",{staticClass:"form-wrapper"},[e("div",{staticClass:"line justified"},[e("div",{staticClass:"radios"},[e("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,checked:t.mode,type:"radio",value:"record","button-variant-grouped":"horizontal",name:"mode"},on:{"update:checked":t.onModeChanged}},[t._v("\n\t\t\t\t\t"+t._s(t.t("assistant","Record Audio"))+"\n\t\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{"button-variant":!0,checked:t.mode,type:"radio",value:"choose","button-variant-grouped":"horizontal",name:"mode"},on:{"update:checked":t.onModeChanged}},[t._v("\n\t\t\t\t\t"+t._s(t.t("assistant","Choose Audio File"))+"\n\t\t\t\t")])],1)])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"record"===t.mode,expression:"mode === 'record'"}],staticClass:"recorder-wrapper"},[null!==t.audioData?e("NcButton",{attrs:{"aria-label":t.t("assistant","Reset recorded audio")},on:{click:t.resetRecording},scopedSlots:t._u([{key:"icon",fn:function(){return[e("UndoIcon")]},proxy:!0}],null,!1,2996252088)},[t._v("\n\t\t\t"+t._s(t.t("assistant","Reset"))+"\n\t\t")]):t._e(),t._v(" "),null!==t.audioData||t.isRecording?t._e():e("NcButton",{ref:"startRecordingButton",on:{click:t.startRecording},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MicrophoneIcon")]},proxy:!0}],null,!1,55695278)},[t._v("\n\t\t\t"+t._s(t.t("assistant","Start recording"))+"\n\t\t")]),t._v(" "),null===t.audioData&&t.isRecording?e("NcButton",{ref:"stopRecordingButton",on:{click:t.stopRecording},scopedSlots:t._u([{key:"icon",fn:function(){return[e("StopIcon")]},proxy:!0}],null,!1,2516142544)},[t._v("\n\t\t\t"+t._s(t.t("assistant","Stop recording"))+"\n\t\t")]):t._e(),t._v(" "),t.resettingRecorder?t._e():e("audio-recorder",{ref:"recorder",staticClass:"recorder",class:{"no-audio":null===t.audioData,"with-audio":null!==t.audioData},attrs:{attempts:1,time:300,"show-download-button":!1,"show-upload-button":!1,"before-recording":t.onRecordStarts,"after-recording":t.onRecordEnds,mode:"minimal"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"choose"===t.mode,expression:"mode === 'choose'"}]},[e("div",{staticClass:"line"},[t._v("\n\t\t\t"+t._s(null==t.audioFilePath?t.t("assistant","No audio file selected"):t.t("assistant","Selected Audio File:")+" "+t.audioFilePath.split("/").pop())+"\n\t\t")]),t._v(" "),e("div",{staticClass:"line justified"},[e("NcButton",{attrs:{disabled:t.loading,"aria-label":t.t("assistant","Choose audio file in your storage")},on:{click:t.onChooseButtonClick}},[t._v("\n\t\t\t\t"+t._s(t.t("assistant","Choose audio File"))+"\n\t\t\t")])],1)])])}),[],!1,null,"e4e7f042",null).exports,ArrowRightIcon:r.A,NcButton:d.A,NcLoadingIcon:c.A,AssistantIcon:s},props:{providerId:{type:String,required:!0},accessible:{type:Boolean,default:!1}},data:()=>({loading:!1,mode:"record",audioData:null,audioFilePath:null}),computed:{canSubmit(){return"record"===this.mode&&null!==this.audioData||"choose"===this.mode&&null!==this.audioFilePath}},mounted(){},methods:{resetAudioState(){this.audioData=null,this.audioFilePath=null},async onInputEnter(){if("record"===this.mode){const t=(0,A.generateOcsUrl)("/apps/assistant/api/v1/stt/transcribeAudio"),e=new FormData;e.append("audioData",this.audioData),await this.apiRequest(t,e)}else{const t=(0,A.generateOcsUrl)("/apps/assistant/api/v1/stt/transcribeFile"),e={path:this.audioFilePath};await this.apiRequest(t,e)}this.resetAudioState()},async apiRequest(e,o){this.loading=!0;try{await l.default.post(e,o),(0,u.Te)(t("assistant","Successfully scheduled transcription")),this.$emit("submit","")}catch(e){console.error("API error:",e),this.resetAudioState(),(0,u.showError)(t("assistant","Failed to schedule transcription")+(": "+e.response?.data||0))}finally{this.loading=!1}}}};var P=n(8141),j={};j.styleTagTransform=E(),j.setAttributes=R(),j.insert=D().bind(null,"head"),j.domAPI=_(),j.insertStyleElement=F();k()(P.A,j);P.A&&P.A.locals&&P.A.locals;const M=(0,i.A)(N,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"picker-content-wrapper"},[e("div",{staticClass:"picker-content"},[e("h2",[e("AssistantIcon",{staticClass:"icon",attrs:{size:24}}),t._v("\n\t\t\t"+t._s(t.t("assistant","Audio transcription"))+"\n\t\t")],1),t._v(" "),e("SpeechToTextInputForm",{attrs:{mode:t.mode,"audio-data":t.audioData,"audio-file-path":t.audioFilePath,loading:t.loading},on:{"update:mode":function(e){t.mode=e},"update:audioData":function(e){t.audioData=e},"update:audio-data":function(e){t.audioData=e},"update:audioFilePath":function(e){t.audioFilePath=e},"update:audio-file-path":function(e){t.audioFilePath=e}}}),t._v(" "),e("div",{staticClass:"footer"},[e("NcButton",{attrs:{type:"primary",disabled:t.loading||!t.canSubmit},on:{click:t.onInputEnter},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("NcLoadingIcon",{attrs:{size:20}}):e("ArrowRightIcon")]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("assistant","Schedule Transcription"))+"\n\t\t\t")])],1)],1)])}),[],!1,null,"69d3213e",null).exports}}]);
//# sourceMappingURL=assistant-speech-to-text-picker-lazy.js.map?v=eeca1886c6adc8658ad4